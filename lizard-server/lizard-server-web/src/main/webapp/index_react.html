<html>
  <head>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap-table/4.3.1/react-bootstrap-table.min.css">
      
  </head>
  <body>
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
   <a class="navbar-brand" href="#">Lizard</a>
  </nav>
  <hr/><hr/><hr />
  <div id="router"></div>
  <div id="root"></div>
  <div id="tasks"></div>
  <div id="tasks-dt"></div>

  <!--  JQuery -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

  <!-- React -->
  <script src="https://unpkg.com/react@16.0.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <!-- React-Bootstrap -->
  <!-- react-transition-group is required by reactstrap -->
  <!-- https://shinglyu.github.io/web/2018/02/08/minimal-react-js-without-a-build-step-updated.html -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-transition-group/2.4.0/react-transition-group.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reactstrap/6.0.0/reactstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap-table/4.3.1/react-bootstrap-table.min.js"></script>

  <!-- React Router -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-router-dom/4.3.0/react-router-dom.min.js"></script>
  
  <script type="text/babel">

// React router
// React Router V4, nested routing demo (works without WebPack) https://codepen.io/schafeld/pen/yzvZPj?editors=1000
const Router = window.ReactRouterDOM.BrowserRouter;
const Route =  window.ReactRouterDOM.Route;
const Link =  window.ReactRouterDOM.Link;
const NavLink = window.ReactRouterDOM.NavLink;
const Prompt =  window.ReactRouterDOM.Prompt;
const Switch = window.ReactRouterDOM.Switch;
const Redirect = window.ReactRouterDOM.Redirect;

const App = () => (
  <div>
    <Navigation />
    <Main />
   </div>
);

const Navigation = () => (
  <nav>
    <ul>
      <li><NavLink exact to='/'>Home</NavLink></li>
      <li><NavLink exact to='/add'>Add Task</NavLink></li>
      <li><NavLink exact to='/about'>About</NavLink></li>
      <li><NavLink exact to='/contact'>Contact</NavLink></li>
    </ul>
  </nav>
);

const Home = () => (
  <div>
    <h1>Welcome to my lizard project</h1>
    <p> Feel free to browse around and learn more about me.</p>
  </div>
);

const About = () => (
  <div>
    <h1>About Me</h1>
  </div>
);

const Contact = () => (
  <div>
    <h1>Contact Me</h1>
    <p>You can reach me via email: <strong>hello@example.com</strong></p>
  </div>
);

const {Button, Form, FormGroup, Label, Input, FormText} = Reactstrap

class TaskForm extends React.Component {

render() {
    return (
       <Form>
        <FormGroup>
          <Label for="taskName">Name</Label>
          <Input type="text" name="taskName" id="taskName" />
        </FormGroup>
        <FormGroup>
          <Label for="taskDescription">Description</Label>
          <Input type="text" name="taskDescription" id="taskDescription" />
        </FormGroup>
      </Form>
    );
  }

}

const Main = () => (
  <Switch>
    <Route exact path='/' component={Home}></Route>
	<Route exact path='/add' component={TaskForm}></Route>
    <Route exact path='/about' component={About}></Route>
    <Route exact path='/contact' component={Contact}></Route>
  </Switch>
);

ReactDOM.render(
		 <Router>
   		   <App />
		 </Router>,
document.getElementById('router'));

// Ajax call with jquery

class TaskComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      error: null,
      isLoaded: false,
      items: []
    };
  }

  componentDidMount() {
    $.ajax({
      url: "rest/tasks",
      dataType: 'json',
      cache: false,
      success: function(data) {
        this.setState({items: data});
      }.bind(this),
      error: function(xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }.bind(this)
    });
  }

  render() {
    const { error, isLoaded, items } = this.state;
    if (error) {
      return <div>Error: {error.message}</div>;
    } else {
      return (
        <ul>
          {items.map(item => (
            <li key={item.name}>
              {item.name} | {item.description}
            </li>
          ))}
        </ul>
      );
    }
  }
}

ReactDOM.render(
  <TaskComponent />,
  document.getElementById('tasks')
);

// react-bootstrap datatable
// http://allenfang.github.io/react-bootstrap-table/docs.html
$.ajax({
      url: "rest/tasks",
      dataType: 'json',
      cache: false,
      success: function(data) {
        ReactDOM.render(
            <BootstrapTable data= {data} search headerStyle={ { background: '#e0ffe2' } }>
               <TableHeaderColumn isKey dataField='id'>Task ID</TableHeaderColumn>
	           <TableHeaderColumn dataField='name'>Task Name</TableHeaderColumn>
	           <TableHeaderColumn dataField='description'>Description</TableHeaderColumn>
            </BootstrapTable>,
            document.getElementById('tasks-dt')
        );
      },
      error: function(xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }
    });

  </script>

  </body>
</html>